# ビットAIリファクタリング計画

更新日: 2025-12-28

## 目的
- `src/game/bits.ts` のモード分岐を整理し、可読性と保守性を高める
- モードごとの共通パラメータ（視野・射程・連射間隔・継続時間など）をプロパティ化して再利用しやすくする
- 将来的なモード追加やバランス調整を安全に行える構造にする

## 方針案
- モードクラス化案（候補）: `BitModeController` の共通基底 + `SearchMode` / `ChaseMode` / `FixedMode` / `RandomMode` / `AlertMode` / `CarpetMode` の分離
- モードテーブル案（候補）: `modeConfigs` に数値パラメータ、`modeHandlers` に更新関数を分離
- 共通ロジック（移動/回転/発射/クールダウン/視野判定）を小関数化して共有

## ステップ
- [x] 現状整理: bits.ts のモード分岐、共有ロジック、状態フィールドの依存関係を洗い出す
- [x] 設計比較: クラス化案とテーブル化案の長所/短所を整理し、採用方針を決める
- [x] 最小リファクタ: 共通関数の抽出とモード設定の集約（数値定数のテーブル化）
- [x] モード処理の分離: attack系とsearch/alert/carpetの更新処理を切り出す
- [ ] 影響確認: 仕様変更がないこと、既存挙動が維持されることを確認する
