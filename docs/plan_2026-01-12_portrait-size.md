# 立ち絵表示切替 計画

更新日: 2026-01-11

## プロンプト
public\picture\chara配下に2キャラ分の立ち絵差分があります。
ファイル名とキャラのモードを対応付けて、立ち絵を表示・切り替えできるようにしてください。
なお、今は2キャラ分しか画像及びディレクトリがないので、別キャラに同一キャラの画像を当てる重複を許可します。
画像ディレクトリを増やしたら、なるべく重複しないように割当ロジックを組んでおいてください。
（最終的には、キャラIDとディレクトリ名を対応付けたいです）
以上の計画を立ててください。
- 立ち絵の表示対象はPC, NPC含む全キャラです
- 立ち絵の表示位置、サイズは現在のキャラスプライトに合わせてください。後で調整する可能性はあります。
- brainwash-complete-haigure / brainwash-complete-haigure-formationはどちらも、bw-complete-pose.pngを表示してください
- キャラIDは voiceId（例: 05/09）を使うのを優先してほしいですが、現在は画像が足りないので、足りない分は重複させて補ってください。
- 立ち絵は画面のHUDではなく、ステージ内を歩くキャラクタースプライトを置き換える

## ステップ
- [x] CharacterState→立ち絵ファイル名/セル番号の対応表を整理する（brainwash系の統合含む）
- [x] voiceId→立ち絵ディレクトリ割当とスプライトシート生成を実装する
- [x] NPC/プレイヤーのスプライト生成を立ち絵用SpriteManagerに切り替える
- [x] 状態更新に追従してスプライトのcellIndexを更新し、HUD表示は削除する

## 結果
- 立ち絵ファイル名とCharacterStateの対応を9セルのスプライトシートに反映
- voiceId→ディレクトリ割当を行い、該当ディレクトリの立ち絵スプライトシートを生成
- NPC/プレイヤーのSpriteManagerを立ち絵用に切り替えて再生成するよう更新
- 状態更新に合わせてスプライトのcellIndexを更新し、HUD表示は削除
