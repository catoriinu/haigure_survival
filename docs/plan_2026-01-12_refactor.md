# 立ち絵サイズ調整 計画

更新日: 2026-01-12

## プロンプト
立ち絵のサイズ、比率とその表示について調整したいです。
今は立ち絵の解像度が粗い状態です。まず、解像度を高く（画像のままに）表示することはできますか？　ゲーム内スプライトの大きさは今と同じ位にしたいです。
今の比率からすると、ステージ上では縦に長く引き伸ばされてしまっています。
なので比率を元画像と同じに整えたいです。
将来的に、画像は差し替え可能にしたいと思っており、キャラごとにこれという画像は決められません。
最大高さ2セル分、横1セル分までという風に縦横に限度を設けたいです。そのどちらか先に上限になった方に合わせて、もう一方の辺の比率を画像ごとに設定するという仕組みはできますか？
両方OKです。まずは計画を立ててください。

## ステップ
- [x] 1セル=layout.cellSizeを基準に、最大幅1セル・最大高さ2セルのスケール算出関数を定義する
- [x] 立ち絵シート読み込み時に画像の縦横比を保持し、プレイヤー/NPCの幅高さを上限に合わせて計算する
- [x] ステージ切り替えやリセット時に再計算し、スプライトの比率が画像と一致することを確認する

## 結果
- 立ち絵画像サイズからスプライトの幅高さを計算し、最大幅1セル・最大高さ2セルの範囲に収める処理を追加
- ステージ切り替え/リセット時に再計算して比率維持されるよう更新
