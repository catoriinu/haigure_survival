# arena_trap_room 演出調整 計画

更新日: 2026-02-08

## プロンプト
- 全トラップ光線消滅後のインターバルを 2 秒に短縮してください。
- トラップの光線は、球ではなく柱や壁のような見た目のイメージです。つまり発射された後も最後に消滅するまでは、ずっと極太のビームが照射され続けるイメージにしてください。
- 床や壁の点滅色は、透明度0（床や壁の色をピンクで完全に上書きする）でお願いします

## ステップ
- [x] トラップ周期のインターバルを 5 秒から 2 秒に変更
- [x] トラップ点滅色を不透明ピンク（完全上書き）へ変更
- [x] トラップ光線を持続照射型（極太・柱状）へ変更
- [x] 型チェックでビルド破綻がないことを確認

## 結果
- `src/main.ts` の `trapIntervalDuration` を `2` に変更した。
- `src/main.ts` の `trapTelegraphMaterial.alpha` を `1` に変更し、床/壁点滅を不透明化した。
- `src/game/types.ts` の `Beam` に `persistent` / `persistentTimer` を追加した。
- `src/game/beams.ts` を更新し、トラップ光線を以下の仕様にした。
  - 生成時に壁/天井到達距離まで一気に伸びた極太ビームを配置
  - 先端球は非表示
  - 一定時間（1.2秒）持続表示した後に消滅
  - 命中時に即時 retract しない（持続表示を維持）
- 検証として `npx tsc -p tsconfig.json --noEmit` を実行し、成功した。
