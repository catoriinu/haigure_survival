# プレイヤー移動のdelta基準統一 計画

更新日: 2025-12-28

## 目的
- プレイヤー移動をdelta基準に統一し、NPC/ビットと同一の単位系で調整できる状態にする
- 既存の操作感・当たり判定を維持しつつ、fps依存の移動スケールを排除する

## 方針
- FreeCameraの`speed`依存をやめ、入力状態（WASD）から移動ベクトルを自前で算出する
- 移動は`camera.moveWithCollisions()`を使い、既存のコリジョン挙動を維持する
- 速度は「ユニット/秒」の単位で定義し、`delta`で積分する

## ステップ
- [x] 現状のプレイヤー移動経路（`src/main.ts`/`src/ui/input.ts`）を整理し、置換対象の処理を確定
- [x] プレイヤー移動の入力状態管理（WASDの押下/解放）を追加し、メインループから参照できる形にする
- [x] `delta`基準の移動計算を実装し、`camera.speed`の利用を停止する
- [x] NPCブロック中/brainwash状態の移動停止など既存条件を新ロジックへ移植する
- [x] 手動動作確認（体感速度、衝突、斜め移動の正規化）
