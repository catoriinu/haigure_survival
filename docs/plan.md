# ビット挙動・照準調整プラン

更新日: 2025-12-28

## 目的
- 通常時はふわふわ浮かぶように上下揺れを強め、急いでいる状態では揺れを抑える
- 通常モードに「その場で上下移動」「上/下斜めに前進」の移動パターンを追加し、前方移動が基本であることを守る
  - その場上下移動は水平向きを保ったままゆっくり上下する
- ターゲット不在時に立ち止まり探索（下方向と左右のみの円錐旋回）を追加する
- 通常モード中の向き変更頻度を抑え、警戒モード解除は水平復帰後に行う
- 高低差がある場面の命中率を、attack-chase/attack-fixed の仕様に沿って改善する
- attack-random は現在の向きのまま撃ち、通常より素早く動きつつ発射中は停止させる
- chase の追尾精度・発射距離・発射間隔・諦め時間を調整する
- 継続時間の調整と carpetBombPassDelay を更新する
- 視野角/感知距離の黒赤分離と chase/fixed/random の解除条件を調整する
- 攻撃系モード終了時のクールダウンを追加する
- alert解除距離と警戒集合後の遷移率を調整する

## ステップ
- [x] 現状整理: `src/game/bits.ts` の移動・高度・照準・発射の流れと、赤/黒ビットの分岐点を洗い出す
- [x] 通常浮遊の調整: 上下揺れ拡大と急ぎ状態で揺れ停止を実装する
- [x] 通常モードの移動拡張: その場上下・斜め前進のパターン追加と前方移動基準の整理を行う
- [x] 探索停止の追加: ターゲット不在時の停止＋下/左右旋回を追加する
- [x] 照準仕様の反映: 
  - attack-chase は高度低下の移動を優先し、照準補正は小さめにする
  - attack-fixed は黒ビットは初弾のみ向き補正して固定、赤ビットは弾ごとに向き補正
  - 赤ビットの attack-fixed 選択確率を上げる
- [x] attack-random の調整: 通常より素早い移動/旋回、発射中は移動と旋回を停止する
- [x] 通常モードの旋回頻度調整と警戒解除の水平復帰を実装する
- [x] chase の追尾精度/発射距離/発射間隔/諦め時間を調整する
- [x] 継続時間の調整と carpetBombPassDelay を更新する
- [x] 視野角/感知距離の黒赤分離と chase/fixed/random の解除条件を調整する
- [x] 攻撃系モード終了時のクールダウンを追加する
- [x] alert解除距離と警戒集合後の遷移率を調整する
- [ ] 動作確認: 高低差あり/なし、通常/急ぎ状態、赤/黒ビットで意図どおりの命中と挙動になっているか確認する
